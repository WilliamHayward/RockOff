!function(t,e){for(var n in e)t[n]=e[n]}(window,function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var i=function(t){function e(e){var n=t.call(this)||this;n.id="",n.reserved={};var r=e.replace(/https?:\/\//,"ws://");return n.socket=new WebSocket(r),n.retry=!0,n.url=r,n.addListeners(),n}return o(e,t),e.prototype.reconnect=function(t){this.socket=t,this.addListeners();var e={event:"reconnect",data:[this.id],sender:this.id,recipient:[]};this.sendMessage(e)},e.prototype.sendMessage=function(t){0===t.sender.length&&(t.sender=this.id),this.socket.send(JSON.stringify(t))},e.prototype.setID=function(t){return this.id=t.data[0],this.deteReservation(t.event),!0},e.prototype.reserve=function(t,e){this.reserved[t]=e.bind(this)},e.prototype.deteReservation=function(t){delete this.reserved[t]},e.prototype.addListeners=function(){var t=this;this.socket.addEventListener("open",function(){t.emit("connected"),t.connected()}),this.socket.addEventListener("error",function(){}),this.socket.addEventListener("message",function(e){t.handle(e)}),this.socket.addEventListener("close",function(){t.retry&&t.autoReconnect()})},e.prototype.autoReconnect=function(){var t=this,e=new WebSocket(this.url);e.addEventListener("error",function(){setTimeout(t.autoReconnect,1e3)}),e.addEventListener("open",function(){t.reconnect(e)})},e}(n(1).EventManager);e.SocketUser=i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){this.events={}}return t.prototype.on=function(t,e,n){void 0===n&&(n=this),this.addEvent(t,e,n,!1)},t.prototype.once=function(t,e,n){void 0===n&&(n=this),this.addEvent(t,e,n,!0)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.events[t];void 0!==r&&r.forEach(function(t,n,r){t.fn.apply(t.context,e),t.once&&r.splice(n,1)})},t.prototype.clear=function(t){delete this.events[t]},t.prototype.addEvent=function(t,e,n,r){void 0===this.events[t]&&(this.events[t]=[]);var o={once:r,fn:e.bind(n),context:n};this.events[t].push(o)},t}();e.EventManager=r},function(t,e,n){"use strict";e.__esModule=!0;var r,o=n(3),i=n(4);(r=e.Lipwig||(e.Lipwig={})).join=function(t,e,n){return void 0===n&&(n={}),new o.Client(t,e,n)},r.create=function(t,e){return void 0===e&&(e={}),new i.Host(t,e)}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var i=function(t){function e(e,n,r){void 0===r&&(r={});var o=t.call(this,e)||this;return o.reserve("joined",o.setID),o.code=n,o.data=r,o}return o(e,t),e.prototype.send=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r={event:t,data:e,sender:this.id,recipient:[]};this.sendMessage(r)},e.prototype.connected=function(){var t={event:"join",data:[this.code,this.data],sender:"",recipient:[]};this.sendMessage(t)},e.prototype.handle=function(t){var e=JSON.parse(t.data);if(!(e.event in this.reserved)||this.reserved[e.event](e)){var n=[e.event].concat(e.data);n.push(e),this.emit.apply(this,n)}},e}(n(0).SocketUser);e.Client=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var i=n(0),s=n(5),c=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,e)||this;return r.reserve("created",r.created),r.reserve("joined",r.joined),r.reserve("reconnected",function(){return r.emit("reconnected"),!1}),r.users={},r.groups={},r.options=n,r}return o(e,t),e.prototype.getUsers=function(){return this.users},e.prototype.close=function(t){var e={event:"close",data:[t],recipient:[],sender:this.id};this.sendMessage(e)},e.prototype.assign=function(t,e){var n=this.groups[e];void 0===n&&(this.groups[e]=[],n=this.groups[e]),-1===n.indexOf(t)&&(n.push(t),t.send("assigned",e))},e.prototype.unassign=function(t,e){var n=this.groups[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&(this.groups[e]=n.splice(r,1),t.send("unassigned",e))}},e.prototype.getGroup=function(t){var e=this.groups[t];return void 0===e?[]:e},e.prototype.send=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=[];void 0===e.whitelist&&(e.whitelist=[]),o=this.filter(e.whitelist,!0),void 0===e.blacklist&&(e.blacklist=[]);var i=this.filter(e.blacklist,!1),s=[t].concat(n);o.forEach(function(t){i.indexOf(t)>-1||t.send.apply(t,s)})},e.prototype.handle=function(t){var e=JSON.parse(t.data);if(!(e.event in this.reserved)||this.reserved[e.event](e)){var n=[e.event].concat(e.data);if(e.sender in this.users){var r=this.users[e.sender];n.push(e),r.emit.apply(r,n),n.splice(1,0,r)}this.emit.apply(this,n)}},e.prototype.connected=function(){var t={event:"create",data:[this.options],sender:"",recipient:[]};this.sendMessage(t)},e.prototype.created=function(t){this.setID(t);var e=t.data[0];return this.emit("created",e),!1},e.prototype.joined=function(t){var e=t.data[0],n=t.data[1],r=new s.User(e,this);return this.users[e]=r,this.emit("joined",r,n,t),!1},e.prototype.filter=function(t,e){var n=this,r=[];if(0===t.length&&e){var o=this.getUsers();return Object.keys(o).forEach(function(t){r.push(o[t])}),r}return t.forEach(function(t){r=r.concat(n.getGroup(t))}),r=r.filter(function(t,e,n){return n.indexOf(t)===e})},e}(i.SocketUser);e.Host=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var i=function(t){function e(e,n){var r=t.call(this)||this;return r.id=e,r.parent=n,r}return o(e,t),e.prototype.send=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r={event:t,data:e,sender:this.parent.id,recipient:[this.id]};this.parent.sendMessage(r)},e.prototype.assign=function(t){this.parent.assign(this,t)},e.prototype.unassign=function(t){this.parent.unassign(this,t)},e.prototype.kick=function(t){void 0===t&&(t=""),this.send("kick",this.id,t)},e}(n(1).EventManager);e.User=i}]));